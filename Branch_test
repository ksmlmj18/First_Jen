pipeline {
    agent any

    stages {
        stage('Main 브랜치에서만 실행') {
            when {
                expression {
                    return env.GIT_BRANCH?.contains('main')
                }
            }
            steps {
                echo '🟢 이것은 main 브랜치에서 실행됩니다.'
            }
        }

        stage('모든 브랜치에서 실행') {
            steps {
                echo '이건 항상 실행됨'
            }
        }

        stage('브랜치 확인') {
            steps {
                sh 'git rev-parse --abbrev-ref HEAD'
            }
        }
    }
}

